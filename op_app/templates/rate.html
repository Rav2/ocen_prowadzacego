{% extends "base.html" %}


{% block additional-styles %}

<link rel="stylesheet" href="styles/rate.css">

{% endblock %}
{% block content %}

{% if profile %}

    <div class="container">
<!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
          <img class="img-responsive user-photo" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
        <h1>{{profile.name}} {{ profile.surname }}</h1>
          <p>
          {% if profile.info %}
            {{ profile.info }}
          {% endif %}
          </p>
      </div>
</div>

<div class="container">
<form method="POST">
    {% csrf_token %}
    <div class="row">
     <label for="nick">Pseudonim</label>
    <input type = "text" name="nick" id="name="nick"" maxlength="10">
    <label for="content">Treść komentarza</label>
    <input type="text" name="content" id=name="content"  maxlength="200">
    <input type="submit" class="btn btn-default" value="Dodaj" />
    </div>
    <div class="row">
        <label for="teaching_rating">Nauczanie</label>
    <div class="star-rating" id="teaching_rating">
      <span class="fa fa-star-o t" data-t_rating="1"></span>
      <span class="fa fa-star-o t" data-t_rating="2"></span>
      <span class="fa fa-star-o t" data-t_rating="3"></span>
      <span class="fa fa-star-o t" data-t_rating="4"></span>
      <span class="fa fa-star-o t" data-t_rating="5"></span>
      <input type="hidden" name="teaching_val" class="rating-value t" value="3">
    </div>
        <label for="knowledge_rating">Wiedza</label>
    <div class="star-rating" id="knowledge_rating">
      <span class="fa fa-star-o k" data-k_rating="1"></span>
      <span class="fa fa-star-o k" data-k_rating="2"></span>
      <span class="fa fa-star-o k" data-k_rating="3"></span>
      <span class="fa fa-star-o k" data-k_rating="4"></span>
      <span class="fa fa-star-o k" data-k_rating="5"></span>
      <input type="hidden" name="knowledge_val" class="rating-value k" value="3">
    </div>
      <label for="friendliness_rating">Nastawienie do studentów</label>
    <div class="star-rating" id="friendliness_rating">
      <span class="fa fa-star-o f" data-f_rating="1"></span>
      <span class="fa fa-star-o f" data-f_rating="2"></span>
      <span class="fa fa-star-o f" data-f_rating="3"></span>
      <span class="fa fa-star-o f" data-f_rating="4"></span>
      <span class="fa fa-star-o f" data-f_rating="5"></span>
      <input type="hidden" name="friendliness_val" class="rating-value f" value="3">
    </div>
</div>
</form>
</div>

<div class="container">
<div class="row">
<div class="col-sm-12">
<h3>Komentarze </h3>
</div><!-- /col-sm-12 -->
</div><!-- /row -->

{% if comments%}
{% for comment in comments%}
<div class="single-comment">
<div class="row">

<div class="col-sm-1">
<div class="thumbnail">
<img class="img-responsive user-photo" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
</div><!-- /thumbnail -->
</div><!-- /col-sm-1 -->

<div class="col-sm-5">
<div class="panel panel-default">
<div class="panel-heading">
<strong>{{comment.nickname}}</strong> <em class="date-container" id="date">{{comment.date | date:"d/m/Y   H:i" }}</em> <span class="text-muted">


   <ul>
    <li>Nauczanie:
        {% for i in "xxxxx" %}
        {% if  forloop.counter0  <=  comment.teaching %}
         <span class="fa fa-star f"></span>
        {% else %}
          <span class="fa fa-star-o f"></span>
        {% endif %}
        {% endfor %}
       </li>
    <li>Wiedza:  {% for i in "xxxxx" %}
        {% if  forloop.counter0  <=  comment.knowledge %}
         <span class="fa fa-star f"></span>
        {% else %}
          <span class="fa fa-star-o f"></span>
        {% endif %}
        {% endfor %}</li>
    <li>Stosunek do studentów: {% for i in "xxxxx" %}
        {% if  forloop.counter0  <=  comment.friendliness %}
         <span class="fa fa-star f"></span>
        {% else %}
          <span class="fa fa-star-o f"></span>
        {% endif %}
        {% endfor %}</li>
    </ul>
</span>
</div>
<div class="panel-body">
{{comment.text}}
</div><!-- /panel-body -->
</div><!-- /panel panel-default -->
</div><!-- /col-sm-5 -->
</div>
    </div>
{% endfor %}
{%else%}
<li>Bądź pierwszy i oceń {{profile.name }} {{profile.surname}}</li>
{%endif%}

{% else %}
  <p>No lecturers!!!</p>
{% endif %}

{% endblock %}
 {% block page-script-bottom %}

<script type="text/javascript">
var $star_rating = $('.star-rating .fa');

var SetRatingStar = function() {
  return $star_rating.each(function() {
    if($(this).hasClass('t')){
        if (parseInt($star_rating.siblings('input.t').val()) >= parseInt($(this).data('t_rating'))) {
            return $(this).removeClass('fa-star-o').addClass('fa-star');
        } else {
         return $(this).removeClass('fa-star').addClass('fa-star-o');
        }
    }
    else if($(this).hasClass('k')){
        if (parseInt($star_rating.siblings('input.k').val()) >= parseInt($(this).data('k_rating'))) {
            return $(this).removeClass('fa-star-o').addClass('fa-star');
        } else {
         return $(this).removeClass('fa-star').addClass('fa-star-o');
        }
    }
    else if($(this).hasClass('f')){
        if (parseInt($star_rating.siblings('input.f').val()) >= parseInt($(this).data('f_rating'))) {
            return $(this).removeClass('fa-star-o').addClass('fa-star');
        } else {
         return $(this).removeClass('fa-star').addClass('fa-star-o');
        }
    }

  });
};

$star_rating.on('click', function() {
    if($(this).hasClass('t')){
        $star_rating.siblings('input.t').val($(this).data('t_rating'));
    }
    else if($(this).hasClass('k')){
        $star_rating.siblings('input.k').val($(this).data('k_rating'));
    }else if($(this).hasClass('f')){
        $star_rating.siblings('input.f').val($(this).data('f_rating'));}
  return SetRatingStar();
});



$star_rating.on('mouseover', function() {
  $star_rating.css('cursor', 'pointer');

});

SetRatingStar();
</script>
{% endblock %}